{"version":3,"sources":["components/Header/index.js","components/Dropzone/index.js","components/Player/index.js","components/Footer/index.js","components/App/index.js","index.js"],"names":["Header","className","DropZone","onDrop","useDropzone","files","accept","getRootProps","getInputProps","isDragActive","cn","STATUS","Player","useState","status","setStatus","sources","setSources","count","setCount","undefined","activeId","setActiveId","time","useRef","containerRef","playersRef","Set","onRef","player","current","add","useEffect","length","onPlay","useCallback","throttle","id","console","log","audio","audioId","dataset","duration","currentTime","paused","play","pause","i","file","reader","FileReader","onload","readerEvent","prevSources","String","name","blob","URL","createObjectURL","Blob","target","result","type","readAsArrayBuffer","ref","map","source","item__active","controls","data-id","muted","src","onMouseOver","e","onSeeked","onTimeUpdate","Footer","href","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8ae1528c.chunk.js","sourcesContent":["import './index.css';\n\nexport const Header = () => {\n    return (<div className=\"header\">\n        <div className=\"logo\">Compare audio side by side</div>\n    </div>);\n}","import {useDropzone} from \"react-dropzone\";\nimport './index.css';\nimport cn from \"classnames\";\n\nexport const DropZone = ({onDrop}) => {\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({\n        onDrop: (files) => onDrop({files}),\n        accept: \"audio/*\",\n    });\n\n    return (\n        <div className={cn(\"dropzone\", { \"dropzone_active\": isDragActive })} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <div className={\"dropzone__area\"}>\n                <div className={\"dropzone__button\"}>\n                    {\n                        isDragActive\n                            ? \"Now drop the files here\"\n                            : \"Drag'n'drop audio files to this page\"\n                    }\n                    <br/>\n                    <span>or click this button</span>\n                </div>\n            </div>\n        </div>\n    )\n}","import {useState, useRef, useEffect, useCallback} from \"react\";\nimport cn from 'classnames';\nimport throttle from 'lodash.debounce';\nimport './index.css';\nimport {DropZone} from \"../Dropzone\";\n\nconst STATUS = {\n    empty: \"empty\",\n    loading: \"loading\",\n    ready: \"ready\",\n}\n\nexport const Player = () => {\n    const [status, setStatus] = useState(STATUS.empty);\n    const [sources, setSources] = useState([]);\n    const [count, setCount] = useState(0);\n    const [activeId, setActiveId] = useState(undefined);\n    const time = useRef(0);\n    const containerRef = useRef();\n    const playersRef = useRef(new Set());\n\n    const onRef = (player) => {\n        if (player) {\n            playersRef.current.add(player);\n        }\n    }\n\n    const onChange = ({files}) => {\n        setStatus(STATUS.loading);\n        setCount(files.length);\n        for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            const reader = new FileReader();\n            reader.onload = (readerEvent) => {\n                setSources((prevSources) => ([\n                    ...prevSources,\n                    {\n                        id: String(i),\n                        name: file.name,\n                        blob: URL.createObjectURL(new Blob([readerEvent.target.result], {type: file.type}))\n                    }\n                ]));\n            };\n            reader.readAsArrayBuffer(files[i]);\n        }\n    }\n\n    useEffect(() => {\n        if (count > 0 && sources.length === count) {\n            setStatus(STATUS.ready);\n        }\n    }, [sources, count]);\n\n    const onPlay = useCallback(\n        throttle(({id}) => {\n            console.log('>> onPlay', {id, activeId});\n            for (let audio of playersRef.current) {\n                const audioId = audio.dataset.id;\n                if (audioId === id) {\n                    if (audioId !== activeId && audio.duration >= time.current) {\n                        audio.currentTime = time.current;\n                        if (audio.paused) {\n                            audio.play();\n                        }\n                    }\n                } else {\n                    audio.pause();\n                }\n            }\n            setActiveId(id);\n        }, 100),\n        [activeId]\n    );\n\n    const onTimeUpdate = ({currentTime, id}) => {\n        if (id !== activeId) {\n            return;\n        }\n        time.current = currentTime;\n    }\n\n    const onSeeked = ({target}) => {\n        if (target.paused) {\n            target.play();\n        }\n    }\n\n    if (status === STATUS.empty) {\n        return (<DropZone onDrop={onChange}/>);\n    }\n\n    if (status === STATUS.loading) {\n        return (<div className=\"loader\">loading...</div>);\n    }\n\n    if (status === STATUS.ready) {\n        return <div className=\"player\" ref={containerRef}>\n            {sources.map((source) => (<div\n                key={source.id}\n                className={cn(\"item\", {item__active: source.id === activeId})}\n            >\n                <div className=\"item__title\">{source.name}</div>\n                <audio\n                    ref={onRef}\n                    controls\n                    data-id={source.id}\n                    muted={false}\n                    src={source.blob}\n                    onMouseOver={() => onPlay({id: source.id})}\n                    onPlay={(e) => onPlay({id: source.id})}\n                    onSeeked={(e) => onSeeked(e)}\n                    onTimeUpdate={(e) => onTimeUpdate({\n                        currentTime: e.target.currentTime,\n                        id: source.id,\n                    })}\n                />\n            </div>))}\n        </div>\n    }\n\n    return null;\n}","import './index.css';\n\nexport const Footer = () => {\n    return (<div className=\"footer\">\n        <div className=\"disclaimer\">\n            Made with <span>ðŸ–¤</span> by <a href=\"https://linktr.ee/futurfrukt\" target=\"_blank\">FuturFrukt</a>\n        </div>\n    </div>);\n}","import './index.css';\nimport {Header} from \"../Header\";\nimport {Player} from \"../Player\";\nimport {Footer} from \"../Footer\";\n\nexport function App() {\n    return (\n        <div className=\"app\">\n            <Header/>\n            <div className=\"main\">\n                <Player/>\n            </div>\n            <Footer/>\n        </div>\n    );\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './components/App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}